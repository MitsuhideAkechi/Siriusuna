# `QFile`
![](IMG-20251211101629930.png)

Example:
![](IMG-20251211101629973.png)
别忘了 close

![](IMG-20251211101630006.png)

# `QTextStream`
![](IMG-20251211101630049.png)
```cpp
in.setEncoding(QStringConverter::Utf8); // Qt6
```

![](IMG-20251211101630091.png)

# `QFileDialog`
![](IMG-20251211101630126.png)
```cpp
fileName = QFileDialog::getOpenFileName(this,
    tr("Open Image"), "/home/jana", tr("Image Files (*.png *.jpg *.bmp)"));
```
分步自定义与打开：
![](IMG-20251211101630158.png)
```cpp
// 1. 创建一个文件对话框对象
QFileDialog dialog(this);

// 2. 设置标题
dialog.setWindowTitle("选择图片");

// 3. 设置起始路径（可选）
dialog.setDirectory(QDir::homePath()); // 或者 "C:/Users"

// 4. 限制文件类型
dialog.setNameFilter("图片文件 (*.png *.jpg *.bmp)");

// 5. 设置只选一个已存在文件
dialog.setFileMode(QFileDialog::ExistingFile);

// 6. 打开对话框，等待用户操作
if (dialog.exec() == QDialog::Accepted) {
    // 7. 获取选中的文件列表（QStringList）
    QStringList files = dialog.selectedFiles();

    // 8. 因为只选一个，取第一个即可
    QString fileName = files.first();

    qDebug() << "选中的文件是:" << fileName;
}
```
保存：
```cpp
QString fileName = QFileDialog::getSaveFileName(this, tr("Save File"),
                           "/home/jana/untitled.png",
                           tr("Images (*.png *.xpm *.jpg)"));
```
![](IMG-20251211101630200.png)
（实际不会直接保存，还是要有文件操作）

综合使用：
```cpp
void Widget::on_btnOpen_clicked()
{
    QFileDialog filename(this);
    filename.setFileMode(QFileDialog::ExistingFile);
    filename.setNameFilter("Text (*.txt)");
    if (filename.exec()) {
        QString name = filename.selectedFiles().first();
        QFile file(name);
        if (!file.open(QIODevice::ReadOnly | QIODevice::Text)) {
            QMessageBox::warning(this, "错误", "无法打开文件！");
            return;
        }
        ui->textEdit->clear();
        QTextStream in(&file);
        in.setEncoding(QStringConverter::Utf8);
        while (!in.atEnd()) {
            QString line = in.readLine();
            ui->textEdit->append(line);
        }
        file.close();
    }
}
```

# 文件编码
![](IMG-20251211101630235.png)
![](IMG-20251211101630273.png)
![](IMG-20251211101630359.png)
![](IMG-20251211101630394.png)

# 光标位置
![](IMG-20251211101630424.png)
